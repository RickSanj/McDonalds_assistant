Create a command-line application that serves as a text-based ordering simulator for McDonald's.

The application should work as a chat between the user and the system.

The user can type their request as a free text, and the system should respond to it.
The ordering should be based on the menu provided in the separate yaml file.
Please use the LLM to process the user's request and determine the ordered items. After the LLM has processed the user's request, the application should send the system's response to the user.
The rules for the system responses are as follows:
  1. The first message should be from the system, where it greets the user and ask for their order.
  2. If the user has ordered something, the system should ask if they want anything else.
  3. If the user has ordered a combo without specifying a drink, the system should ask which drink they want (a side is "French Fries" by default, unless the user specifies otherwise).
  4. LLM output should always be validated against the menu, if it doesn't pass the validation, the system should ask the user to specify the order again, and discard the LLM output. Same goes for any incomplete output not covered by these rules, e.g. if the user has ordered standalone fries or drink, without specifying the size.
  5. If the user indicates the end of the order, the system should respond with the order total price, and list all of the ordered items.

Example:
System: Welcome to McDonald's! What can I get you started with?
User: I want a Big Mac and a Coke.
System: What else can I get you?
User: That's all.
System: Your order total is $6.79.

Variations:
  1. Include ingredients. Each item in the menu has a list of default ingredients, and also a list of ingredients that can be added for an extra price. The ingredients cannot be ordered standalone. The user can also choose to exclude the default ingredients, with no extra charge.
  2. Include upsells. If the user has ordered a burger, offer to turn it into a combo, for every burger ordered. If the user has ordered a combo, offer to add a dipping sauce for extra charge, for every combo. If the user has order any burger or a combo, offer to add a dessert, but only once per order.
  3. Include double deals. A double deal is a combo that includes two items, with a 20% discount. If the user asked for a double deal, ask which two items they want. If the user asked for a double deal with only one item specified, ask which second item they want. If the user ordered two burgers without asking for a double deal, automatically make it a double deal.
  4. Include virtual items and clarification questions. If the user asks for "drink", "burger", "combo", "dessert", or "ice cream", ask which item exactly they want. If the user asked for fries or drink as a standalone item, ask which size they want.
  5. Remove items if user changed his mind. instead of 2 big macs switch one to cheeseburger
  6. User ignores your claryfing questions

Technical requirements:
- Python 3.12 or 3.13
- Poetry as a package manager
- Docker - the application should run in a docker container
- Git - push all the source code to a separate git repository, employ Git best practices when doing so. 

Bonus tasks:
  1. Use LLM to generate system responses for unscripted cases: when the LLM doesn't predict any changes in the order state based on user input, or it predicts a state that is incomplete and there is no scripted response for it, ask the LLM what the system response should be. The UI should indicate that the system response is generated by the LLM
  2. Implement asynchronous chat - allow sending consequtive user messages even before the system responds. Use asyncio.
  3. Make it a client-server application, where the server is the REST-ful web service, and the client is a command line app. Use FastAPI.